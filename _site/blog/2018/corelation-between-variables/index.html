<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Avhirup Chakraborty | Understanding Correlation</title>
  <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design.
">

  <link rel="shortcut icon" href="http://localhost:4000/assets/img/favicon.ico">

  <link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
  <link rel="canonical" href="http://localhost:4000/blog/2018/corelation-between-variables/">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    
    <span class="site-title">
        
        <strong>Avhirup</strong> Chakraborty
    </span>
    

    <nav class="site-nav">
      <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

      <div class="trigger">
        <!-- About -->
        <a class="page-link" href="http://localhost:4000/">about</a>

        <!-- Blog -->
        <a class="page-link" href="http://localhost:4000/blog/">blog</a>

        <!-- Pages -->
        
          
        
          
        
          
        
          
            <a class="page-link" href="http://localhost:4000/projects/">projects</a>
          
        
          
        

        <!-- CV link -->
        <a class="page-link" href="http://localhost:4000/assets/pdf/Avhirup_Search_Resume.pdf">resume</a>

      </div>
    </nav>

  </div>

</header>



    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
    <h1 class="post-title">Understanding Correlation</h1>
    <p class="post-meta">December 15, 2018</p>
  </header>

  <article class="post-content">
    <p>Association between variables serve to help exploit predictive properties.These <strong>associations/dependence</strong> help us in finding relevant features,finding highly corelated variables etc. Random variables could be classified into continous(interval &amp; ratio) or categorical(nominal &amp; oridinal).This <a href="https://www.spss-tutorials.com/measurement-levels/#ordinal-variable">link</a> talks more about it.</p>

<h3 id="correlation-between-two-continuous-variable">Correlation between two continuous variable</h3>
<p>Pearson’s Coefficient gives an indication of linear dependence of two variables.For positive correlation,as one variable increases,so does the other.For a negatively correlation,as one variable increases, other variable decreases.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#Pandas
</span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="n">df</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="s">f"</span><span class="si">{</span><span class="n">file_path_to_dataframe</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
<span class="c1">#calculate the correlation matric
</span><span class="n">corr</span><span class="o">=</span><span class="n">df</span><span class="p">.</span><span class="n">corr</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">'pearson'</span><span class="p">)</span> 
<span class="n">sns</span><span class="p">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">corr</span><span class="p">,</span>
	<span class="n">xticklabels</span><span class="o">=</span><span class="n">corr</span><span class="p">.</span><span class="n">columns</span><span class="p">,</span>
	<span class="n">yticklabels</span><span class="o">=</span><span class="n">corr</span><span class="p">.</span><span class="n">columns</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="correlation-between-two-categorical-variable">Correlation between two categorical variable</h3>
<p>In the case of categorical variables, we cant define correlation in true sense.Though there are other methods to see relation between two variables.</p>
<h4 id="ordinal-variables">Ordinal Variables</h4>
<p>For ordinal variables, we could rank the observations and measure “correlation” between ordinal variables.</p>
<ul>
  <li><a href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient">Spearman correlation</a> : Spearman’s correlation coefficient, (ρ, also signified by rs) measures the strength and direction of association between two ranked variables.This metric could work for ordinal,interval &amp; ratio variables.It varies between therange of [-1,1] with 0 implying no correlation.
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span>
<span class="n">rho</span><span class="p">,</span><span class="n">pval</span><span class="o">=</span><span class="n">stats</span><span class="p">.</span><span class="n">spearmanr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li><a href="https://en.wikipedia.org/wiki/Kendall_rank_correlation_coefficient">Kendall’s Tau</a>“Kendall’s tau is a measure of the correspondence between two rankings. Values close to 1 indicate strong agreement, values close to -1 indicate strong disagreement”
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>
<span class="n">tau_stat</span><span class="p">,</span><span class="n">pvalue</span><span class="o">=</span><span class="n">stats</span><span class="p">.</span><span class="n">kendalltau</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
</ul>

<h4 id="nominal-variables">Nominal Variables</h4>
<p>Unlike ordinal variables,nominal variables dont have anything as “order”, hence ranking them doesnt make sense. There are alternative methods to see cases like these.</p>
<ul>
  <li><a href="http://mlwiki.org/index.php/Cramer%27s_Coefficient">Cramer’s Coefficient</a>.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">cramers_corrected_stat</span><span class="p">(</span><span class="n">confusion_matrix</span><span class="p">):</span>
    <span class="s">""" calculate Cramers V statistic for categorial-categorial association.
        uses correction from Bergsma and Wicher, 
        Journal of the Korean Statistical Society 42 (2013): 323-328
    """</span>
    <span class="n">chi2</span> <span class="o">=</span> <span class="n">ss</span><span class="p">.</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">confusion_matrix</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">.</span><span class="nb">sum</span><span class="p">()</span>
    <span class="n">phi2</span> <span class="o">=</span> <span class="n">chi2</span><span class="o">/</span><span class="n">n</span>
    <span class="n">r</span><span class="p">,</span><span class="n">k</span> <span class="o">=</span> <span class="n">confusion_matrix</span><span class="p">.</span><span class="n">shape</span>
    <span class="n">phi2corr</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">phi2</span> <span class="o">-</span> <span class="p">((</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span>    
    <span class="n">rcorr</span> <span class="o">=</span> <span class="n">r</span> <span class="o">-</span> <span class="p">((</span><span class="n">r</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">kcorr</span> <span class="o">=</span> <span class="n">k</span> <span class="o">-</span> <span class="p">((</span><span class="n">k</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">n</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">np</span><span class="p">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">phi2corr</span> <span class="o">/</span> <span class="nb">min</span><span class="p">(</span> <span class="p">(</span><span class="n">kcorr</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="n">rcorr</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>

<span class="kn">import</span> <span class="nn">pandas</span> 
<span class="n">confusion_matrix</span><span class="o">=</span><span class="n">pd</span><span class="p">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">column1</span><span class="p">],</span><span class="n">df</span><span class="p">[</span><span class="n">column2</span><span class="p">])</span>
</code></pre></div></div>

<ul>
  <li><a href="https://machinelearningmastery.com/chi-squared-test-for-machine-learning/">Chi squared Contingency</a>
The chi-square test of independence works by comparing the categorically coded data that you have collected (known as the observed frequencies) with the frequencies that you would expect to get in each cell of a table by chance alone (known as the expected frequencies).</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">pandas</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">chi2_contingency</span>

<span class="k">def</span> <span class="nf">chisq_of_df_cols</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">):</span>
    <span class="n">groupsizes</span> <span class="o">=</span> <span class="n">df</span><span class="p">.</span><span class="n">groupby</span><span class="p">([</span><span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">]).</span><span class="n">size</span><span class="p">()</span>
    <span class="n">ctsum</span> <span class="o">=</span> <span class="n">groupsizes</span><span class="p">.</span><span class="n">unstack</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span>
    <span class="c1"># fillna(0) is necessary to remove any NAs which will cause exceptions
</span>    <span class="k">return</span><span class="p">(</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">ctsum</span><span class="p">.</span><span class="n">fillna</span><span class="p">(</span><span class="mi">0</span><span class="p">)))</span>

<span class="n">test_df</span> <span class="o">=</span> <span class="n">pandas</span><span class="p">.</span><span class="n">DataFrame</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]],</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">'var1'</span><span class="p">,</span> <span class="s">'var2'</span><span class="p">])</span>
<span class="n">tab</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="n">crosstab</span><span class="p">(</span><span class="n">df</span><span class="p">.</span><span class="n">A</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="n">df</span><span class="p">.</span><span class="n">B</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">chisq_of_df_cols</span><span class="p">(</span><span class="n">test_df</span><span class="p">,</span> <span class="s">'var1'</span><span class="p">,</span> <span class="s">'var2'</span><span class="p">)</span>
<span class="c1">#or
</span><span class="n">chisq</span><span class="p">,</span><span class="n">pval</span><span class="p">,</span><span class="n">dof</span><span class="p">,</span><span class="n">expected</span><span class="o">=</span><span class="n">chi2_contingency</span><span class="p">(</span><span class="n">tab</span><span class="p">)</span>
</code></pre></div></div>

<h3 id="correlation-between-a-categorical--continuos-variable">Correlation between a categorical &amp; continuos variable</h3>
<ul>
  <li><a href="http://mlwiki.org/index.php/One-Way_ANOVA_F-Test">one-way Anova</a>.</li>
</ul>

<blockquote>
  <p>References :</p>
  <ul>
    <li><a href="https://statistics.laerd.com/statistical-guides/spearmans-rank-order-correlation-statistical-guide.php">Spearmans rank order correlation</a></li>
    <li><a href="https://www.spss-tutorials.com/measurement-levels/#ordinal-variable">Different types of variables</a></li>
    <li><a href="https://stats.stackexchange.com/questions/119835/correlation-between-a-nominal-iv-and-a-continuous-dv-variable/124618#124618">Best Question</a></li>
    <li><a href="https://en.wikipedia.org/wiki/Correlation_and_dependence">Correlation and dependence</a></li>
    <li><a href="https://en.wikipedia.org/wiki/Statistical_hypothesis_testing">Statistical hypothesis testing</a></li>
    <li><a href="https://en.wikipedia.org/wiki/Chi-squared_test">Chi-squared test</a></li>
    <li><a href="https://en.wikipedia.org/wiki/Cram%C3%A9r%27s_V">Cramér’s V</a></li>
  </ul>
</blockquote>

  </article>

  
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname  = 'avhirupc';
      var disqus_identifier = '/blog/2018/corelation-between-variables';
      var disqus_title      = "Understanding Correlation";
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  

</div>

      </div>
    </div>

    <footer>

  <div class="wrapper">
    &copy; Copyright 2021 Avhirup Chakraborty.
    Powered by <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank">GitHub Pages</a>.

    
  </div>

</footer>


    <!-- Load jQuery -->
<script src="//code.jquery.com/jquery-1.12.4.min.js"></script>

<!-- Load Common JS -->
<script src="http://localhost:4000/assets/js/common.js"></script>


<!-- Load KaTeX -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js"></script>
<script src="http://localhost:4000/assets/js/katex.js"></script>




<!-- Include custom icon fonts -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/fontawesome-all.min.css">
<link rel="stylesheet" href="http://localhost:4000/assets/css/academicons.min.css">

<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-XXXXXXXXX', 'auto');
ga('send', 'pageview');
</script>


  </body>

</html>
